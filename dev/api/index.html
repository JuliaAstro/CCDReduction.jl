<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API/Reference · CCDReduction.jl</title><meta name="title" content="API/Reference · CCDReduction.jl"/><meta property="og:title" content="API/Reference · CCDReduction.jl"/><meta property="twitter:title" content="API/Reference · CCDReduction.jl"/><meta name="description" content="Documentation for CCDReduction.jl."/><meta property="og:description" content="Documentation for CCDReduction.jl."/><meta property="twitter:description" content="Documentation for CCDReduction.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">CCDReduction.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API/Reference</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#API/Reference-2"><span>API/Reference</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API/Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API/Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaAstro/CCDReduction.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API/Reference"><a class="docs-heading-anchor" href="#API/Reference">API/Reference</a><a id="API/Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API/Reference" title="Permalink"></a></h1><p>For now, here is a list of all documented functions.</p><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#CCDReduction.AbstractCCDData"><code>CCDReduction.AbstractCCDData</code></a></li><li><a href="#CCDReduction.CCDData-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.CCDData</code></a></li><li><a href="#CCDReduction.CCDData-Tuple{AbstractString}"><code>CCDReduction.CCDData</code></a></li><li><a href="#CCDReduction.CCDData"><code>CCDReduction.CCDData</code></a></li><li><a href="#CCDReduction.arrays"><code>CCDReduction.arrays</code></a></li><li><a href="#CCDReduction.arrays-Tuple{Any, Any}"><code>CCDReduction.arrays</code></a></li><li><a href="#CCDReduction.ccds-Tuple{Any, Any}"><code>CCDReduction.ccds</code></a></li><li><a href="#CCDReduction.ccds"><code>CCDReduction.ccds</code></a></li><li><a href="#CCDReduction.combine-Tuple{Vararg{AbstractArray{&lt;:Number}}}"><code>CCDReduction.combine</code></a></li><li><a href="#CCDReduction.crop-Tuple{Any, Any}"><code>CCDReduction.crop</code></a></li><li><a href="#CCDReduction.cropview-Tuple{AbstractArray, Any}"><code>CCDReduction.cropview</code></a></li><li><a href="#CCDReduction.filenames"><code>CCDReduction.filenames</code></a></li><li><a href="#CCDReduction.filenames-Tuple{Any, Any}"><code>CCDReduction.filenames</code></a></li><li><a href="#CCDReduction.find_ccd-Tuple{Base.Broadcast.Broadcasted}"><code>CCDReduction.find_ccd</code></a></li><li><a href="#CCDReduction.fitscollection-Tuple{String}"><code>CCDReduction.fitscollection</code></a></li><li><a href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>CCDReduction.flat_correct</code></a></li><li><a href="#CCDReduction.flat_correct!-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.flat_correct!</code></a></li><li><a href="#CCDReduction.getdata-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.getdata</code></a></li><li><a href="#CCDReduction.subtract_bias-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.subtract_bias</code></a></li><li><a href="#CCDReduction.subtract_bias!-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.subtract_bias!</code></a></li><li><a href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>CCDReduction.subtract_dark</code></a></li><li><a href="#CCDReduction.subtract_dark!-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.subtract_dark!</code></a></li><li><a href="#CCDReduction.subtract_overscan-Tuple{Any, Any}"><code>CCDReduction.subtract_overscan</code></a></li><li><a href="#CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T}, Any}} where T"><code>CCDReduction.subtract_overscan!</code></a></li><li><a href="#CCDReduction.trim-Tuple{Any, Any}"><code>CCDReduction.trim</code></a></li><li><a href="#CCDReduction.trimview-Tuple{AbstractArray, Any}"><code>CCDReduction.trimview</code></a></li><li><a href="#CCDReduction.writefits-Tuple{Any, Any}"><code>CCDReduction.writefits</code></a></li></ul><h2 id="API/Reference-2"><a class="docs-heading-anchor" href="#API/Reference-2">API/Reference</a><a class="docs-heading-anchor-permalink" href="#API/Reference-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.AbstractCCDData" href="#CCDReduction.AbstractCCDData"><code>CCDReduction.AbstractCCDData</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractCCDData{T} &lt;: AbstractMatrix{T}</code></pre><p>Supertype for <code>CCDData</code> based on <code>AbstractMatrix</code> interface.</p><p>Every subtype of this type should have methods <code>data</code> and <code>hdr</code> defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/ccddata.jl#L2-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.CCDData" href="#CCDReduction.CCDData"><code>CCDReduction.CCDData</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CCDData &lt;: AbstractCCDData
CCDData(data::AbstractMatrix, [hdr::FITSHeader])</code></pre><p>Struct to store <code>ImageHDU</code>, derived from <a href="#CCDReduction.AbstractCCDData"><code>AbstractCCDData</code></a>.</p><p><code>CCDData</code> acts like a matrix with a header associated.</p><pre><code class="language-julia hljs">ccd = CCDData(zeros(4, 4))

ccd[1]</code></pre><p>This accesses the 1st element in matrix associated with <code>ccd</code>.</p><pre><code class="language-julia hljs">ccd[&quot;SIMPLE&quot;]</code></pre><p>One can also access the header directly from <code>ccd</code>, the key can be <code>Symbol</code> as well.</p><pre><code class="language-julia hljs">ccd[:SIMPLE] = false</code></pre><p>Header values can be directly modified from <code>ccd</code>.</p><p>One can perform arithmetic operations on it as well:</p><pre><code class="language-julia hljs">ccd1 = CCDData(zeros(4, 4))
ccd2 = CCDData(ones(4, 4))
sum_ccd1 = ccd1 + ccd2
sum_ccd2 = ccd2 + ccd1</code></pre><p><code>sum_ccd1</code> has the header of <code>ccd1</code> whereas <code>sum_ccd2</code> has the header <code>ccd2</code>.</p><p>If header is not provided in the <code>CCDData</code> constructor, <code>default_header</code> is used to generate the header.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/ccddata.jl#L22-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.CCDData-Tuple{AbstractString}" href="#CCDReduction.CCDData-Tuple{AbstractString}"><code>CCDReduction.CCDData</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CCDData(path::AbstractString; hdu = 1)</code></pre><p>Loads HDU from <code>hdu</code> index in <code>FITS</code> file at <code>path</code> as <code>CCDData</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/ccddata.jl#L74-L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.CCDData-Tuple{FITSIO.ImageHDU}" href="#CCDReduction.CCDData-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.CCDData</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CCDData(hdu::ImageHDU)</code></pre><p>Loads <code>ImageHDU</code> as <code>CCDData</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/ccddata.jl#L65-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.arrays" href="#CCDReduction.arrays"><code>CCDReduction.arrays</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">arrays(collection)</code></pre><p>Generator for arrays of images of entries in data frame.</p><p>Iterates over <code>collection</code> using each <code>path</code> and <code>hdu</code> to load data into an <code>Array</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
data = arrays(collection) |&gt; collect</code></pre><p>This returns all image arrays present in <code>collection</code>. This can also be used via a for-loop</p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
for arr in arrays(collection)
    @assert arr isa Array
    println(size(arr))
end

# output
(1048, 1068)
(1048, 1068)
...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L195-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.arrays-Tuple{Any, Any}" href="#CCDReduction.arrays-Tuple{Any, Any}"><code>CCDReduction.arrays</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">arrays(f,
       collection;
       path = nothing,
       save_prefix = nothing,
       save_suffix = nothing,
       save = any(!isnothing, (save_prefix, path, save_suffix)),
       save_delim = &quot;_&quot;,
       ext = r&quot;fits(\.tar\.gz)?&quot;i,
       kwargs...)</code></pre><p>Iterates over the image arrays of the collection applying function <code>f</code> at each step.</p><p>The output from <code>f</code> can be saved using the appropriate keyword arguments. The <code>save_prefix</code> argument will add a prefix to each filename delimited by <code>save_delim</code>. <code>save_suffix</code> will add a suffix prior to the extension, which can be manually provided via <code>ext</code>, similar to <a href="#CCDReduction.fitscollection-Tuple{String}"><code>fitscollection</code></a>. Files will be saved in the directory they are stored unless <code>path</code> is given. Finally, <code>save</code> will default to <code>true</code> if any of the previous arguments are set, but can be manually overridden (useful for testing). Files will be saved using <a href="#CCDReduction.writefits-Tuple{Any, Any}"><code>CCDReduction.writefits</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
processed_images = map(arrays(collection)) do arr
    trim(arr, (:, 1040:1059))
end</code></pre><p>The above generates <code>processed_images</code> which consists of trimmed versions of image arrays present in <code>collection</code>. For saving the <code>processed_images</code> simultaneously with the operations performed</p><pre><code class="language-julia hljs">processed_images = map(arrays(collection; path = &quot;~/data/tekdata&quot;, save_prefix = &quot;trimmed&quot;)) do img
    trim(img, (:, 1040:1059))
end</code></pre><p>The trimmed image arrays are saved as <code>trimmed_(original_name)</code> (FITS files) at <code>path = &quot;~/data/tekdata&quot;</code> as specified by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L436-L475">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.ccds" href="#CCDReduction.ccds"><code>CCDReduction.ccds</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ccds(collection)</code></pre><p>Generator for <code>CCDData</code>s of entries in data frame.</p><p>Iterates over <code>collection</code> using each <code>path</code> and <code>hdu</code> to load data into a <a href="#CCDReduction.CCDData"><code>CCDData</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
for hdu in ccds(collection)
    @assert hdu isa CCDData
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L265-L280">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.ccds-Tuple{Any, Any}" href="#CCDReduction.ccds-Tuple{Any, Any}"><code>CCDReduction.ccds</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ccds(f,
     collection;
     path = nothing,
     save_prefix = nothing,
     save_suffix = nothing,
     save = any(!isnothing, (save_prefix, path, save_suffix)),
     save_delim = &quot;_&quot;,
     ext = r&quot;fits(\.tar\.gz)?&quot;i,
     kwargs...)</code></pre><p>Iterates over the <code>CCDData</code>s of the collection applying function <code>f</code> at each step.</p><p>The output from <code>f</code> can be saved using the appropriate keyword arguments. The <code>save_prefix</code> argument will add a prefix to each filename delimited by <code>save_delim</code>. <code>save_suffix</code> will add a suffix prior to the extension, which can be manually provided via <code>ext</code>, similar to <a href="#CCDReduction.fitscollection-Tuple{String}"><code>fitscollection</code></a>. Files will be saved in the directory they are stored unless <code>path</code> is given. Finally, <code>save</code> will default to <code>true</code> if any of the previous arguments are set, but can be manually overridden (useful for testing). Files will be saved using <a href="#CCDReduction.writefits-Tuple{Any, Any}"><code>CCDReduction.writefits</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
processed_images = map(ccds(collection)) do img
    trim(img, (:, 1040:1059))
end</code></pre><p>The above generates <code>processed_images</code> which consists of trimmed versions of images present in <code>collection</code>.</p><p>For saving the <code>processed_images</code> simultaneously with the operations performed</p><pre><code class="language-julia hljs">processed_images = map(ccds(collection; path = &quot;~/data/tekdata&quot;, save_prefix = &quot;trimmed&quot;)) do img
    trim(img, (:, 1040:1059))
end</code></pre><p>The trimmed images are saved as <code>trimmed_(original_name)</code> (FITS files) at <code>path = &quot;~/data/tekdata&quot;</code> as specified by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L291-L331">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.combine-Tuple{Vararg{AbstractArray{&lt;:Number}}}" href="#CCDReduction.combine-Tuple{Vararg{AbstractArray{&lt;:Number}}}"><code>CCDReduction.combine</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">combine(frames...; method = median, [hdu = 1], [header_hdu = 1])
combine(frames; method = median, [hdu = 1], [header_hdu = 1])</code></pre><p>Combine multiple frames using <code>method</code>. Multiple frames can also be passed in a vector or as generators for combining.</p><p>To pass a custom method, it must have a signature like <code>method(::AbstractArray; dims)</code>.</p><p>If <code>frames</code> are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a>s first. The HDU indices can be specified with <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><p>Header of output file (if applicable) is specified by <code>header_hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = [reshape(1.0:4.0, (2, 2)) for i = 1:4];

julia&gt; combine(frame)
2×2 Matrix{Float64}:
 1.0  3.0
 2.0  4.0

julia&gt; combine(frame, method = sum)
2×2 Matrix{Float64}:
 4.0  12.0
 8.0  16.0
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L331-L358">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.crop-Tuple{Any, Any}" href="#CCDReduction.crop-Tuple{Any, Any}"><code>CCDReduction.crop</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">crop(frame, shape; force_equal = true, [hdu = 1])</code></pre><p>Crops <code>frame</code> to the size specified by <code>shape</code> anchored by the frame center.</p><p>This will remove rows/cols of the <code>frame</code> equally on each side. When there is an uneven difference in sizes (e.g. size 9 -&gt; 6 can&#39;t be removed equally) the default is to increase the output size (e.g. 6 -&gt; 7) so there is equal removal on each side. To disable this, set <code>force_equal=false</code>, which will remove the extra slice from the end of the axis.</p><p>If <code>frame</code> is a string, it will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = reshape(1:25, (5, 5));

julia&gt; crop(frame, (3, 3))
3×3 Matrix{Int64}:
 7  12  17
 8  13  18
 9  14  19

julia&gt; crop(frame, (4, 3), force_equal = false)
4×3 Matrix{Int64}:
 6  11  16
 7  12  17
 8  13  18
 9  14  19</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.cropview-Tuple{AbstractArray, Any}"><code>cropview</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L252-L286">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.cropview-Tuple{AbstractArray, Any}" href="#CCDReduction.cropview-Tuple{AbstractArray, Any}"><code>CCDReduction.cropview</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cropview(frame, shape; force_equal = true)</code></pre><p>Crops <code>frame</code> to the size specified by <code>shape</code> anchored by the frame center.</p><p>This function is same as the <a href="#CCDReduction.crop-Tuple{Any, Any}"><code>crop</code></a> function but returns a view of the frame.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function returns a view of the frame, so any modification to output array will result in modification of frame.</p></div></div><p><strong>See Also</strong></p><p><a href="#CCDReduction.crop-Tuple{Any, Any}"><code>crop</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L290-L303">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.filenames" href="#CCDReduction.filenames"><code>CCDReduction.filenames</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">filenames(collection)</code></pre><p>Generator for filenames of entries in data frame.</p><p>Iterates over <code>collection</code> using each <code>path</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
for path in filenames(collection)
    @assert path isa String
    println(path)
end

# output
&quot;~/data/tekdata/tek001.fits&quot;
&quot;~/data/tekdata/tek002.fits&quot;
...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L234-L254">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.filenames-Tuple{Any, Any}" href="#CCDReduction.filenames-Tuple{Any, Any}"><code>CCDReduction.filenames</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">filenames(f,
          collection;
          path = nothing,
          save_prefix = nothing,
          save_suffix = nothing,
          save = any(!isnothing, (save_prefix, path, save_suffix)),
          save_delim = &quot;_&quot;,
          ext = r&quot;fits(\.tar\.gz)?&quot;i,
          kwargs...)</code></pre><p>Iterates over the file paths of the collection applying function <code>f</code> at each step.</p><p>The output from <code>f</code> can be saved using the appropriate keyword arguments. The <code>save_prefix</code> argument will add a prefix to each filename delimited by <code>save_delim</code>. <code>save_suffix</code> will add a suffix prior to the extension, which can be manually provided via <code>ext</code>, similar to <a href="#CCDReduction.fitscollection-Tuple{String}"><code>fitscollection</code></a>. Files will be saved in the directory they are stored unless <code>path</code> is given. Finally, <code>save</code> will default to <code>true</code> if any of the previous arguments are set, but can be manually overridden (useful for testing). Files will be saved using <a href="#CCDReduction.writefits-Tuple{Any, Any}"><code>CCDReduction.writefits</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">collection = fitscollection(&quot;~/data/tekdata&quot;)
data = map(filenames(collection)) do path
    fh = FITS(path)
    data = getdata(fh[1]) # assuming all 1-hdu are ImageHDUs
    close(fh)
    data
end</code></pre><p>The above generates <code>data</code> which consists of image arrays corresponding to 1st hdu of FITS file paths present in <code>collection</code>. For saving the <code>data</code> simultaneously with the operations performed</p><pre><code class="language-julia hljs">data = map(filenames(collection; path = &quot;~/data/tekdata&quot;, save_prefix = &quot;retrieved_from_filename&quot;)) do img
    fh = FITS(path)
    data = getdata(fh[1]) # assuming all 1-hdu are ImageHDUs
    close(fh)
    data
end</code></pre><p>The retrieved data is saved as <code>retrieved_from_filename_(original_name)</code> (FITS files) at <code>path = &quot;~/data/tekdata&quot;</code> as specified by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L361-L406">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.find_ccd-Tuple{Base.Broadcast.Broadcasted}" href="#CCDReduction.find_ccd-Tuple{Base.Broadcast.Broadcasted}"><code>CCDReduction.find_ccd</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_ccd(As)</code></pre><p>Return the first <a href="#CCDReduction.CCDData"><code>CCDData</code></a> among the arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/ccddata.jl#L95-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.fitscollection-Tuple{String}" href="#CCDReduction.fitscollection-Tuple{String}"><code>CCDReduction.fitscollection</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fitscollection(dir;
               recursive=true,
               abspath=true,
               keepext=true,
               ext=r&quot;fits(\.tar\.gz)?&quot;,
               exclude=nothing,
               exclude_dir=nothing,
               exclude_key=(&quot;&quot;, &quot;HISTORY&quot;))</code></pre><p>Walk through <code>dir</code> collecting FITS files, scanning their headers, and culminating into a <code>DataFrame</code> that can be used with the generators for iterating over many files and processing them. If <code>recursive</code> is false, no subdirectories will be walked through.</p><p>The table returned will contain the path to the file, the name of the file, and index of the corresponding HDU, and each FITS header column and value. If two FITS files have distinct columns, they will both appear in the table with <code>missing</code> in the appropriate rows.</p><div class="admonition is-info"><header class="admonition-header">Duplicate Keys</header><div class="admonition-body"><p>In certain cases, there are multiple FITS headers with the same key, e.g., <code>COMMENT</code>. In these cases, only the first instance of the key-value pair will be stored.</p></div></div><p>If <code>abspath</code> is true, the path in the table will be absolute. If <code>keepext</code> is true, the name in the table will include the file extension, given by <code>ext</code>. <code>ext</code> will be used with <code>endswith</code> to filter for fits files compatible with <code>FITSIO.FITS</code>. <code>exclude</code> is a pattern that can be used with <code>occursin</code> to exclude certain filenames. For example, to exclude any files containing &quot;sky&quot;,</p><pre><code class="language-julia hljs">fitscollection(...; exclude=&quot;sky&quot;)</code></pre><p>to exclude exact filenames, <a href="https://docs.julialang.org/en/v1/manual/strings/#Regular-Expressions-1">regex strings</a> will prove powerful</p><pre><code class="language-julia hljs">fitscollection(...; exclude=r&quot;^tek001\d&quot;)</code></pre><p>finally, using external tools like <a href="https://github.com/vtjnash/Glob.jl">Glob.jl</a> allows further customization</p><pre><code class="language-julia hljs">using Glob
fitscollection(...; exclude=fn&quot;tek001*.fits&quot;) # same as regex match above</code></pre><p>Similarly, <code>exclude_dir</code> allows excluding entire folders using pattern matching (e.g. skipping a backup folder <code>exclude_dir=&quot;backup&quot;</code>). <code>exclude_key</code> allows excluding certain entries in the header unit of <code>ImageHDU</code> in FITS files (e.g. skipping <code>&quot;HISTORY&quot;</code> and <code>&quot;&quot;</code> <code>exclude_key = (&quot;HISTORY&quot;, &quot;&quot;)</code>).</p><p>For more information about the file matching and path deconstruction, see the extended help (<code>??fitscollection</code>)</p><p><strong>Extended Help</strong></p><p><strong>Parts of a path</strong></p><p>Let&#39;s look at some file paths starting from <code>&quot;/data&quot;</code>. Here are examples of how they would be parsed</p><pre><code class="language-plain hljs"> root  dir   base   ext
[----][---][------][---]
/data/test/tek0001.fits

 root    dir     base   ext
[----][-------][------][---]
/data/test/sci/tek0001.fits</code></pre><p>If <code>keepext</code> is <code>true</code>, <code>name=base * ext</code>, otherwise it is just <code>base</code>. If <code>abspath</code> is <code>true</code>, the path will be <code>root * dir * base * ext</code>, otherwise it will be <code>dir * base * ext</code>. These options allow flexility in creating a table that can be easily saved and loaded to avoid having to manually filter files. Especially consider how <code>abspath</code> can allow keeping tables that will transfer easily between computers or between data sources with common structures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L68-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.flat_correct!-Tuple{AbstractArray, AbstractArray}" href="#CCDReduction.flat_correct!-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.flat_correct!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flat_correct!(frame, flat_frame; norm_value = mean(flat_frame), [hdu = 1])</code></pre><p>In-place version of <a href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>flat_correct</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>flat_correct</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L111-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}" href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>CCDReduction.flat_correct</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flat_correct(frame, flat_frame; norm_value = mean(flat_frame), [hdu = 1])</code></pre><p>Correct <code>frame</code> for non-uniformity using the calibrated <code>flat_frame</code>.</p><p>By default, the <code>flat_frame</code> is normalized by its mean, but this can be changed by providing a custom <code>norm_value</code>.</p><p>If either are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function may introduce non-finite values if <code>flat_frame</code> contains values very close to <code>0</code> due to dividing by zero. The default behavior will return <code>Inf</code> if the frame value is non-zero, and <code>Nan</code> if the frame value is <code>0</code>.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = ones(3, 3);

julia&gt; flat = fill(2.0, (3, 3));

julia&gt; flat_correct(frame, flat, norm_value = 1.0)
3×3 Matrix{Float64}:
 0.5  0.5  0.5
 0.5  0.5  0.5
 0.5  0.5  0.5

julia&gt; flat_correct(frame, flat)
3×3 Matrix{Float64}:
 1.0  1.0  1.0
 1.0  1.0  1.0
 1.0  1.0  1.0</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.flat_correct!-Tuple{AbstractArray, AbstractArray}"><code>flat_correct!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L126-L165">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.getdata-Tuple{FITSIO.ImageHDU}" href="#CCDReduction.getdata-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.getdata</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CCDReduction.getdata(::FITSIO.ImageHDU)</code></pre><p>Loads the given HDU as an <code>Array</code>, permuting the dimensions appropriately.</p><p>FITSIO.jl takes over memory read in by cfitsio, which reads in row-major form, whereas when Julia takes that memory, it is assumed as column major. Therefore all data read by <a href="http://juliaastro.org/FITSIO.jl/latest/api.html#Base.read-Tuple{ImageHDU}"><code>FITSIO.read</code></a> is transposed. This function allows the user to read data in a consistent way to <code>Array</code> by transposing after reading.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/fits.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.subtract_bias!-Tuple{AbstractArray, AbstractArray}" href="#CCDReduction.subtract_bias!-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.subtract_bias!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtract_bias!(frame, bias_frame; [hdu = 1])</code></pre><p>In-place version of <a href="#CCDReduction.subtract_bias-Tuple{AbstractArray, AbstractArray}"><code>subtract_bias</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_bias-Tuple{AbstractArray, AbstractArray}"><code>subtract_bias</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L21-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.subtract_bias-Tuple{AbstractArray, AbstractArray}" href="#CCDReduction.subtract_bias-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.subtract_bias</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtract_bias(frame, bias_frame; [hdu = 1])</code></pre><p>Subtract the <code>bias_frame</code> from <code>frame</code>.</p><p>If either are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = [1.0 2.2 3.3 4.5];

julia&gt; bias = [0.0 0.2 0.3 0.5];

julia&gt; subtract_bias(frame, bias)
1×4 Matrix{Float64}:
 1.0  2.0  3.0  4.0
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_bias!-Tuple{AbstractArray, AbstractArray}"><code>subtract_bias!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L35-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.subtract_dark!-Tuple{AbstractArray, AbstractArray}" href="#CCDReduction.subtract_dark!-Tuple{AbstractArray, AbstractArray}"><code>CCDReduction.subtract_dark!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtract_dark!(frame, dark_frame; data_exposure = 1, dark_exposure = 1, [hdu = 1])</code></pre><p>In-place version of <a href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>subtract_dark</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>subtract_dark</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L369-L376">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}" href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T}, AbstractArray{S}}} where {T, S}"><code>CCDReduction.subtract_dark</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtract_dark(frame, dark_frame; data_exposure = 1, dark_exposure = 1, [hdu = 1])</code></pre><p>Subtract the <code>dark_frame</code> from <code>frame</code>.</p><p>If either are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = ones(3, 3);

julia&gt; dark_frame = ones(3, 3);

julia&gt; subtract_dark(frame, dark_frame)
3×3 Matrix{Float64}:
 0.0  0.0  0.0
 0.0  0.0  0.0
 0.0  0.0  0.0

julia&gt; subtract_dark(frame, dark_frame, data_exposure = 1, dark_exposure = 4)
3×3 Matrix{Float64}:
 0.75  0.75  0.75
 0.75  0.75  0.75
 0.75  0.75  0.75
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_dark!-Tuple{AbstractArray, AbstractArray}"><code>subtract_dark!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L384-L413">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T}, Any}} where T" href="#CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T}, Any}} where T"><code>CCDReduction.subtract_overscan!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtract_overscan!(frame, idxs; dims = axes_min_length(idxs))</code></pre><p>In-place version of <a href="#CCDReduction.subtract_overscan-Tuple{Any, Any}"><code>subtract_overscan</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_overscan-Tuple{Any, Any}"><code>subtract_overscan</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L62-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.subtract_overscan-Tuple{Any, Any}" href="#CCDReduction.subtract_overscan-Tuple{Any, Any}"><code>CCDReduction.subtract_overscan</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subtract_overscan(frame, idxs; dims = axes_min_length(idxs), [hdu = 1])</code></pre><p>Subtract the overscan frame from image.</p><p><code>dims</code> is the dimension along which <code>overscan_frame</code> is combined. The default value of <code>dims</code> is the axis with smaller length in overscan region. If <code>idxs</code> is a string it will be parsed as FITS-style indices.</p><p>If <code>frame</code> is a string, it will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = [4.0 2.0 3.0 1.0 1.0];

julia&gt; subtract_overscan(frame, (:, 4:5), dims = 2)
1×5 Matrix{Float64}:
 3.0  1.0  2.0  0.0  0.0

julia&gt; subtract_overscan(frame, &quot;[4:5, 1:1]&quot;, dims = 2)
1×5 Matrix{Float64}:
 3.0  1.0  2.0  0.0  0.0</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T}, Any}} where T"><code>subtract_overscan!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L80-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.trim-Tuple{Any, Any}" href="#CCDReduction.trim-Tuple{Any, Any}"><code>CCDReduction.trim</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trim(frame, idxs; [hdu = 1])</code></pre><p>Trims the <code>frame</code> to remove the region specified by idxs.</p><p>This function trims the array in a manner such that final array should be rectangular. The indices follow standard Julia convention, so <code>(:, 45:60)</code> trims all columns from 45 to 60 and <code>(1:20, :)</code> trims all the rows from 1 to 20. The function also supports FITS-style indices.</p><p>If <code>frame</code> is a string, it will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; frame = ones(5, 5);

julia&gt; trim(frame, (:, 2:5))
5×1 Matrix{Float64}:
 1.0
 1.0
 1.0
 1.0
 1.0

julia&gt; trim(frame, &quot;[2:5, 1:5]&quot;)
5×1 Matrix{Float64}:
 1.0
 1.0
 1.0
 1.0
 1.0
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.trimview-Tuple{AbstractArray, Any}"><code>trimview</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L172-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.trimview-Tuple{AbstractArray, Any}" href="#CCDReduction.trimview-Tuple{AbstractArray, Any}"><code>CCDReduction.trimview</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trimview(frame, idxs)</code></pre><p>Trims the <code>frame</code> to remove the region specified by idxs.</p><p>This function is same as the <a href="#CCDReduction.trim-Tuple{Any, Any}"><code>trim</code></a> function but returns a view of the frame.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function returns a view of the frame, so any modification to output array will result in modification of frame.</p></div></div><p><strong>See Also</strong></p><p><a href="#CCDReduction.trim-Tuple{Any, Any}"><code>trim</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/methods.jl#L213-L226">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CCDReduction.writefits-Tuple{Any, Any}" href="#CCDReduction.writefits-Tuple{Any, Any}"><code>CCDReduction.writefits</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CCDReduction.writefits(file_path, data; header = nothing)
CCDReduction.writefits(file_path, ccd::CCDData)</code></pre><p>Writes <code>data</code>/<code>ccd</code> in FITS format at <code>file_path</code>.</p><p><code>FITSIO</code> takes over memory write in by <code>cfitsio</code>, which writes in row-major form, whereas when Julia gives that memory, it is assumed as column major. Therefore all data written by <a href="https://juliaastro.org/FITSIO.jl/stable/api/#Base.write-Tuple{FITS,%20Dict{String}}"><code>FITSIO.write</code></a> is transposed. This function allows the user to write the data in a consistent     way to FITS file by transposing before writing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/e1028e3e9e9aeabc627ad1d34f1dd3f365ee3d41/src/collection.jl#L44-L56">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Saturday 15 March 2025 04:02">Saturday 15 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
