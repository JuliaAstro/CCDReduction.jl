<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API/Reference · CCDReduction.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">CCDReduction.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API/Reference</a><ul class="internal"><li><a class="tocitem" href="#Index-1"><span>Index</span></a></li><li><a class="tocitem" href="#API/Reference-2"><span>API/Reference</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API/Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API/Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API/Reference-1"><a class="docs-heading-anchor" href="#API/Reference-1">API/Reference</a><a class="docs-heading-anchor-permalink" href="#API/Reference-1" title="Permalink"></a></h1><p>For now, here is a list of all documented functions.</p><h2 id="Index-1"><a class="docs-heading-anchor" href="#Index-1">Index</a><a class="docs-heading-anchor-permalink" href="#Index-1" title="Permalink"></a></h2><ul><li><a href="#CCDReduction.AbstractCCDData"><code>CCDReduction.AbstractCCDData</code></a></li><li><a href="#CCDReduction.CCDData"><code>CCDReduction.CCDData</code></a></li><li><a href="#CCDReduction.CCDData-Tuple{AbstractString}"><code>CCDReduction.CCDData</code></a></li><li><a href="#CCDReduction.CCDData-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.CCDData</code></a></li><li><a href="#CCDReduction.arrays"><code>CCDReduction.arrays</code></a></li><li><a href="#CCDReduction.arrays-Tuple{Any,Any}"><code>CCDReduction.arrays</code></a></li><li><a href="#CCDReduction.ccds-Tuple{Any,Any}"><code>CCDReduction.ccds</code></a></li><li><a href="#CCDReduction.ccds"><code>CCDReduction.ccds</code></a></li><li><a href="#CCDReduction.combine-Tuple{Vararg{AbstractArray{var&quot;#s13&quot;,N} where N where var&quot;#s13&quot;&lt;:Number,N} where N}"><code>CCDReduction.combine</code></a></li><li><a href="#CCDReduction.crop-Tuple{Any,Any}"><code>CCDReduction.crop</code></a></li><li><a href="#CCDReduction.cropview-Tuple{AbstractArray,Any}"><code>CCDReduction.cropview</code></a></li><li><a href="#CCDReduction.filenames-Tuple{Any,Any}"><code>CCDReduction.filenames</code></a></li><li><a href="#CCDReduction.filenames"><code>CCDReduction.filenames</code></a></li><li><a href="#CCDReduction.find_ccd-Tuple{Base.Broadcast.Broadcasted}"><code>CCDReduction.find_ccd</code></a></li><li><a href="#CCDReduction.fitscollection-Tuple{String}"><code>CCDReduction.fitscollection</code></a></li><li><a href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>CCDReduction.flat_correct</code></a></li><li><a href="#CCDReduction.flat_correct!-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.flat_correct!</code></a></li><li><a href="#CCDReduction.getdata-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.getdata</code></a></li><li><a href="#CCDReduction.subtract_bias-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.subtract_bias</code></a></li><li><a href="#CCDReduction.subtract_bias!-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.subtract_bias!</code></a></li><li><a href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>CCDReduction.subtract_dark</code></a></li><li><a href="#CCDReduction.subtract_dark!-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.subtract_dark!</code></a></li><li><a href="#CCDReduction.subtract_overscan-Tuple{Any,Any}"><code>CCDReduction.subtract_overscan</code></a></li><li><a href="#CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T,N} where N,Any}} where T"><code>CCDReduction.subtract_overscan!</code></a></li><li><a href="#CCDReduction.trim-Tuple{Any,Any}"><code>CCDReduction.trim</code></a></li><li><a href="#CCDReduction.trimview-Tuple{AbstractArray,Any}"><code>CCDReduction.trimview</code></a></li><li><a href="#CCDReduction.writefits-Tuple{Any,Any}"><code>CCDReduction.writefits</code></a></li></ul><h2 id="API/Reference-2"><a class="docs-heading-anchor" href="#API/Reference-2">API/Reference</a><a class="docs-heading-anchor-permalink" href="#API/Reference-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.CCDData" href="#CCDReduction.CCDData"><code>CCDReduction.CCDData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CCDData(data::AbstractMatrix, [hdr::FITSHeader])</code></pre><p>Struct to store <code>ImageHDU</code>, derived from <a href="#CCDReduction.AbstractCCDData"><code>AbstractCCDData</code></a>.</p><p><code>CCDData</code> acts like a matrix with a header associated.</p><pre><code class="language-julia">ccd = CCDData(zeros(4, 4))

ccd[1]</code></pre><p>This accesses the 1st element in matrix associated with <code>ccd</code>.</p><pre><code class="language-none">ccd[&quot;SIMPLE&quot;]</code></pre><p>One can also access the header directly from <code>ccd</code>, the key can be <code>Symbol</code> as well.</p><pre><code class="language-none">ccd[:SIMPLE] = false</code></pre><p>Header values can be directly modified from <code>ccd</code>.</p><p>One can perform arithmetic operations on it as well:</p><pre><code class="language-julia">ccd1 = CCDData(zeros(4, 4))

ccd2 = CCDData(ones(4, 4))

sum_ccd1 = ccd1 + ccd2

sum_ccd2 = ccd2 + ccd1</code></pre><p><code>sum_ccd1</code> has the header of <code>ccd1</code> whereas <code>sum_ccd2</code> has the header <code>ccd2</code>.</p><p>If header is not provided in the <code>CCDData</code> constructor, <code>default_header</code> is used to generate the header.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/ccddata.jl#L22-L61">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.CCDData-Tuple{AbstractString}" href="#CCDReduction.CCDData-Tuple{AbstractString}"><code>CCDReduction.CCDData</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">CCDData(path::AbstractString; hdu = 1)</code></pre><p>Loads HDU from <code>hdu</code> index in <code>FITS</code> file at <code>path</code> as <code>CCDData</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/ccddata.jl#L76-L80">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.CCDData-Tuple{FITSIO.ImageHDU}" href="#CCDReduction.CCDData-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.CCDData</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">CCDData(hdu::ImageHDU)</code></pre><p>Loads <code>ImageHDU</code> as <code>CCDData</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/ccddata.jl#L67-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.arrays" href="#CCDReduction.arrays"><code>CCDReduction.arrays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">arrays(collection)</code></pre><p>Generator for arrays of images of entries in data frame.</p><p>Iterates over <code>collection</code> using each <code>path</code> and <code>hdu</code> to load data into an <code>Array</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
data = arrays(collection) |&gt; collect</code></pre><p>This returns all image arrays present in <code>collection</code>. This can also be used via a for-loop</p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
for arr in arrays(collection)
    @assert arr isa Array
    println(size(arr))
end

# output
(1048, 1068)
(1048, 1068)
...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L158-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.arrays-Tuple{Any,Any}" href="#CCDReduction.arrays-Tuple{Any,Any}"><code>CCDReduction.arrays</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">arrays(f,
       collection;
       path = nothing,
       save_prefix = nothing,
       save_suffix = nothing,
       save = any(!isnothing, (save_prefix, path, save_suffix)),
       save_delim = &quot;_&quot;,
       ext = r&quot;fits(\.tar\.gz)?&quot;i,
       kwargs...)</code></pre><p>Iterates over the image arrays of the collection applying function <code>f</code> at each step.</p><p>The output from <code>f</code> can be saved using the appropriate keyword arguments. The <code>save_prefix</code> argument will add a prefix to each filename delimited by <code>save_delim</code>. <code>save_suffix</code> will add a suffix prior to the extension, which can be manually provided via <code>ext</code>, similar to <a href="#CCDReduction.fitscollection-Tuple{String}"><code>fitscollection</code></a>. Files will be saved in the directory they are stored unless <code>path</code> is given. Finally, <code>save</code> will default to <code>true</code> if any of the previous arguments are set, but can be manually overridden (useful for testing). Files will be saved using <a href="#CCDReduction.writefits-Tuple{Any,Any}"><code>CCDReduction.writefits</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
processed_images = map(arrays(collection)) do arr
    trim(arr, (:, 1040:1059))
end</code></pre><p>The above generates <code>processed_images</code> which consists of trimmed versions of image arrays present in <code>collection</code>. For saving the <code>processed_images</code> simultaneously with the operations performed</p><pre><code class="language-julia">processed_images = map(arrays(collection; path = &quot;~/data/tekdata&quot;, save_prefix = &quot;trimmed&quot;)) do img
    trim(img, (:, 1040:1059))
end</code></pre><p>The trimmed image arrays are saved as <code>trimmed_(original_name)</code> (FITS files) at <code>path = &quot;~/data/tekdata&quot;</code> as specified by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L379-L409">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.ccds" href="#CCDReduction.ccds"><code>CCDReduction.ccds</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ccds(collection)</code></pre><p>Generator for <code>CCDData</code>s of entries in data frame.</p><p>Iterates over <code>collection</code> using each <code>path</code> and <code>hdu</code> to load data into a <a href="#CCDReduction.CCDData"><code>CCDData</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
for hdu in ccds(collection)
    @assert hdu isa CCDData
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L227-L241">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.ccds-Tuple{Any,Any}" href="#CCDReduction.ccds-Tuple{Any,Any}"><code>CCDReduction.ccds</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ccds(f,
     collection;
     path = nothing,
     save_prefix = nothing,
     save_suffix = nothing,
     save = any(!isnothing, (save_prefix, path, save_suffix)),
     save_delim = &quot;_&quot;,
     ext = r&quot;fits(\.tar\.gz)?&quot;i,
     kwargs...)</code></pre><p>Iterates over the <code>CCDData</code>s of the collection applying function <code>f</code> at each step.</p><p>The output from <code>f</code> can be saved using the appropriate keyword arguments. The <code>save_prefix</code> argument will add a prefix to each filename delimited by <code>save_delim</code>. <code>save_suffix</code> will add a suffix prior to the extension, which can be manually provided via <code>ext</code>, similar to <a href="#CCDReduction.fitscollection-Tuple{String}"><code>fitscollection</code></a>. Files will be saved in the directory they are stored unless <code>path</code> is given. Finally, <code>save</code> will default to <code>true</code> if any of the previous arguments are set, but can be manually overridden (useful for testing). Files will be saved using <a href="#CCDReduction.writefits-Tuple{Any,Any}"><code>CCDReduction.writefits</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
processed_images = map(ccds(collection)) do img
    trim(img, (:, 1040:1059))
end</code></pre><p>The above generates <code>processed_images</code> which consists of trimmed versions of images present in <code>collection</code>.</p><p>For saving the <code>processed_images</code> simultaneously with the operations performed</p><pre><code class="language-julia">processed_images = map(ccds(collection; path = &quot;~/data/tekdata&quot;, save_prefix = &quot;trimmed&quot;)) do img
    trim(img, (:, 1040:1059))
end</code></pre><p>The trimmed images are saved as <code>trimmed_(original_name)</code> (FITS files) at <code>path = &quot;~/data/tekdata&quot;</code> as specified by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L252-L283">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.combine-Tuple{Vararg{AbstractArray{var&quot;#s13&quot;,N} where N where var&quot;#s13&quot;&lt;:Number,N} where N}" href="#CCDReduction.combine-Tuple{Vararg{AbstractArray{var&quot;#s13&quot;,N} where N where var&quot;#s13&quot;&lt;:Number,N} where N}"><code>CCDReduction.combine</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">combine(frames...; method = median, [hdu = 1], [header_hdu = 1])
combine(frames; method = median, [hdu = 1], [header_hdu = 1])</code></pre><p>Combine multiple frames using <code>method</code>. Multiple frames can also be passed in a vector or as generators for combining.</p><p>To pass a custom method, it must have a signature like <code>method(::AbstractArray; dims)</code>.</p><p>If <code>frames</code> are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a>s first. The HDU indices can be specified with <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><p>Header of output file (if applicable) is specified by <code>header_hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = [reshape(1.0:4.0, (2, 2)) for i = 1:4];

julia&gt; combine(frame)
2×2 Array{Float64,2}:
 1.0  3.0
 2.0  4.0

julia&gt; combine(frame, method = sum)
2×2 Array{Float64,2}:
 4.0  12.0
 8.0  16.0
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L317-L344">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.crop-Tuple{Any,Any}" href="#CCDReduction.crop-Tuple{Any,Any}"><code>CCDReduction.crop</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">crop(frame, shape; force_equal = true, [hdu = 1])</code></pre><p>Crops <code>frame</code> to the size specified by <code>shape</code> anchored by the frame center.</p><p>This will remove rows/cols of the <code>frame</code> equally on each side. When there is an uneven difference in sizes (e.g. size 9 -&gt; 6 can&#39;t be removed equally) the default is to increase the output size (e.g. 6 -&gt; 7) so there is equal removal on each side. To disable this, set <code>force_equal=false</code>, which will remove the extra slice from the end of the axis.</p><p>If <code>frame</code> is a string, it will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = reshape(1:25, (5, 5));

julia&gt; crop(frame, (3, 3))
3×3 Array{Int64,2}:
 7  12  17
 8  13  18
 9  14  19

julia&gt; crop(frame, (4, 3), force_equal = false)
4×3 Array{Int64,2}:
 6  11  16
 7  12  17
 8  13  18
 9  14  19
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.cropview-Tuple{AbstractArray,Any}"><code>cropview</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L243-L274">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.cropview-Tuple{AbstractArray,Any}" href="#CCDReduction.cropview-Tuple{AbstractArray,Any}"><code>CCDReduction.cropview</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">cropview(frame, shape; force_equal = true)</code></pre><p>Crops <code>frame</code> to the size specified by <code>shape</code> anchored by the frame center.</p><p>This function is same as the <a href="#CCDReduction.crop-Tuple{Any,Any}"><code>crop</code></a> function but returns a view of the frame.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function returns a view of the frame, so any modification to output array will result in modification of frame.</p></div></div><p><strong>See Also</strong></p><p><a href="#CCDReduction.crop-Tuple{Any,Any}"><code>crop</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L278-L291">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.filenames" href="#CCDReduction.filenames"><code>CCDReduction.filenames</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">filenames(collection)</code></pre><p>Generator for filenames of entries in data frame.</p><p>Iterates over <code>collection</code> using each <code>path</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
for path in filenames(collection)
    @assert path isa String
    println(path)
end

# output
&quot;~/data/tekdata/tek001.fits&quot;
&quot;~/data/tekdata/tek002.fits&quot;
...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L196-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.filenames-Tuple{Any,Any}" href="#CCDReduction.filenames-Tuple{Any,Any}"><code>CCDReduction.filenames</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">filenames(f,
          collection;
          path = nothing,
          save_prefix = nothing,
          save_suffix = nothing,
          save = any(!isnothing, (save_prefix, path, save_suffix)),
          save_delim = &quot;_&quot;,
          ext = r&quot;fits(\.tar\.gz)?&quot;i,
          kwargs...)</code></pre><p>Iterates over the file paths of the collection applying function <code>f</code> at each step.</p><p>The output from <code>f</code> can be saved using the appropriate keyword arguments. The <code>save_prefix</code> argument will add a prefix to each filename delimited by <code>save_delim</code>. <code>save_suffix</code> will add a suffix prior to the extension, which can be manually provided via <code>ext</code>, similar to <a href="#CCDReduction.fitscollection-Tuple{String}"><code>fitscollection</code></a>. Files will be saved in the directory they are stored unless <code>path</code> is given. Finally, <code>save</code> will default to <code>true</code> if any of the previous arguments are set, but can be manually overridden (useful for testing). Files will be saved using <a href="#CCDReduction.writefits-Tuple{Any,Any}"><code>CCDReduction.writefits</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia">collection = fitscollection(&quot;~/data/tekdata&quot;)
data = map(filenames(collection)) do path
    fh = FITS(path)
    data = getdata(fh[1]) # assuming all 1-hdu are ImageHDUs
    close(fh)
    data
end</code></pre><p>The above generates <code>data</code> which consists of image arrays corresponding to 1st hdu of FITS file paths present in <code>collection</code>. For saving the <code>data</code> simultaneously with the operations performed</p><pre><code class="language-julia">data = map(filenames(collection; path = &quot;~/data/tekdata&quot;, save_prefix = &quot;retrieved_from_filename&quot;)) do img
    fh = FITS(path)
    data = getdata(fh[1]) # assuming all 1-hdu are ImageHDUs
    close(fh)
    data
end</code></pre><p>The retrieved data is saved as <code>retrieved_from_filename_(original_name)</code> (FITS files) at <code>path = &quot;~/data/tekdata&quot;</code> as specified by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L313-L349">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.fitscollection-Tuple{String}" href="#CCDReduction.fitscollection-Tuple{String}"><code>CCDReduction.fitscollection</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">fitscollection(dir;
               recursive=true,
               abspath=true,
               keepext=true,
               ext=r&quot;fits(\.tar\.gz)?&quot;,
               exclude=nothing,
               exclude_dir=nothing,
               exclude_key=(&quot;&quot;, &quot;HISTORY&quot;))</code></pre><p>Walk through <code>dir</code> collecting FITS files, scanning their headers, and culminating into a <code>DataFrame</code> that can be used with the generators for iterating over many files and processing them. If <code>recursive</code> is false, no subdirectories will be walked through.</p><p>The table returned will contain the path to the file, the name of the file, and index of the corresponding hdu, and each FITS header column and value. If two FITS files have distinct columns, they will both appear in the table with <code>missing</code> in the appropriate rows.</p><p>If <code>abspath</code> is true, the path in the table will be absolute. If <code>keepext</code> is true, the name in the table will include the file extension, given by <code>ext</code>. <code>ext</code> will be used with <code>endswith</code> to filter for fits files compatible with <code>FITSIO.FITS</code>. <code>exclude</code> is a pattern that can be used with <code>occursin</code> to exclude certain filenames. For example, to exclude any files containing &quot;sky&quot;,</p><pre><code class="language-julia">fitscollection(...; exclude=&quot;sky&quot;)</code></pre><p>to exclude exact filenames, <a href="https://docs.julialang.org/en/v1/manual/strings/#Regular-Expressions-1">regex strings</a> will prove powerful</p><pre><code class="language-julia">fitscollection(...; exclude=r&quot;^tek001\d&quot;)</code></pre><p>finally, using external tools like <a href="https://github.com/vtjnash/Glob.jl">Glob.jl</a> allows further customization</p><pre><code class="language-julia">using Glob
fitscollection(...; exclude=fn&quot;tek001*.fits&quot;) # same as regex match above</code></pre><p>Similarly, <code>exclude_dir</code> allows excluding entire folders using pattern matching (e.g. skipping a backup folder <code>exclude_dir=&quot;backup&quot;</code>). <code>exclude_key</code> allows excluding certain entries in the header unit of <code>ImageHDU</code> in FITS files (e.g. skipping <code>&quot;HISTORY&quot;</code> and <code>&quot;&quot;</code> <code>exclude_key = (&quot;HISTORY&quot;, &quot;&quot;)</code>).</p><p>For more information about the file matching and path deconstruction, see the extended help (<code>??fitscollection</code>)</p><p><strong>Extended Help</strong></p><p><strong>Parts of a path</strong></p><p>Let&#39;s look at some file paths starting from <code>&quot;/data&quot;</code>. Here are examples of how they would be parsed</p><pre><code class="language-none"> root  dir   base   ext
[----][---][------][---]
/data/test/tek0001.fits

 root    dir     base   ext
[----][-------][------][---]
/data/test/sci/tek0001.fits</code></pre><p>If <code>keepext</code> is <code>true</code>, <code>name=base * ext</code>, otherwise it is just <code>base</code>. If <code>abspath</code> is <code>true</code>, the path will be <code>root * dir * base * ext</code>, otherwise it will be <code>dir * base * ext</code>. These options allow flexility in creating a table that can be easily saved and loaded to avoid having to manually filter files. Especially consider how <code>abspath</code> can allow keeping tables that will transfer easily between computers or between data sources with common structures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L64-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.flat_correct!-Tuple{AbstractArray,AbstractArray}" href="#CCDReduction.flat_correct!-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.flat_correct!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">flat_correct!(frame, flat_frame; norm_value = mean(flat_frame), [hdu = 1])</code></pre><p>In-place version of <a href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>flat_correct</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>flat_correct</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L108-L115">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T" href="#CCDReduction.flat_correct-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>CCDReduction.flat_correct</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">flat_correct(frame, flat_frame; norm_value = mean(flat_frame), [hdu = 1])</code></pre><p>Correct <code>frame</code> for non-uniformity using the calibrated <code>flat_frame</code>.</p><p>By default, the <code>flat_frame</code> is normalized by its mean, but this can be changed by providing a custom <code>norm_value</code>.</p><p>If either are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function may introduce non-finite values if <code>flat_frame</code> contains values very close to <code>0</code> due to dividing by zero. The default behavior will return <code>Inf</code> if the frame value is non-zero, and <code>Nan</code> if the frame value is <code>0</code>.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = ones(3, 3);

julia&gt; flat = fill(2.0, (3, 3));

julia&gt; flat_correct(frame, flat, norm_value = 1.0)
3×3 Array{Float64,2}:
 0.5  0.5  0.5
 0.5  0.5  0.5
 0.5  0.5  0.5

julia&gt; flat_correct(frame, flat)
3×3 Array{Float64,2}:
 1.0  1.0  1.0
 1.0  1.0  1.0
 1.0  1.0  1.0
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.flat_correct!-Tuple{AbstractArray,AbstractArray}"><code>flat_correct!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L123-L158">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.subtract_bias!-Tuple{AbstractArray,AbstractArray}" href="#CCDReduction.subtract_bias!-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.subtract_bias!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">subtract_bias!(frame, bias_frame; [hdu = 1])</code></pre><p>In-place version of <a href="#CCDReduction.subtract_bias-Tuple{AbstractArray,AbstractArray}"><code>subtract_bias</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_bias-Tuple{AbstractArray,AbstractArray}"><code>subtract_bias</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L21-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.subtract_bias-Tuple{AbstractArray,AbstractArray}" href="#CCDReduction.subtract_bias-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.subtract_bias</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">subtract_bias(frame, bias_frame; [hdu = 1])</code></pre><p>Subtract the <code>bias_frame</code> from <code>frame</code>.</p><p>If either are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = [1.0 2.2 3.3 4.5];

julia&gt; bias = [0.0 0.2 0.3 0.5];

julia&gt; subtract_bias(frame, bias)
1×4 Array{Float64,2}:
 1.0  2.0  3.0  4.0
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_bias!-Tuple{AbstractArray,AbstractArray}"><code>subtract_bias!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L35-L56">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.subtract_dark!-Tuple{AbstractArray,AbstractArray}" href="#CCDReduction.subtract_dark!-Tuple{AbstractArray,AbstractArray}"><code>CCDReduction.subtract_dark!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">subtract_dark!(frame, dark_frame; data_exposure = 1, dark_exposure = 1, [hdu = 1])</code></pre><p>In-place version of <a href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>subtract_dark</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>subtract_dark</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L355-L362">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T" href="#CCDReduction.subtract_dark-Union{Tuple{S}, Tuple{T}, Tuple{AbstractArray{T,N} where N,AbstractArray{S,N} where N}} where S where T"><code>CCDReduction.subtract_dark</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">subtract_dark(frame, dark_frame; data_exposure = 1, dark_exposure = 1, [hdu = 1])</code></pre><p>Subtract the <code>dark_frame</code> from <code>frame</code>.</p><p>If either are strings, they will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> as either an integer or a tuple corresponding to each file.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = ones(3, 3);

julia&gt; dark_frame = ones(3, 3);

julia&gt; subtract_dark(frame, dark_frame)
3×3 Array{Float64,2}:
 0.0  0.0  0.0
 0.0  0.0  0.0
 0.0  0.0  0.0

julia&gt; subtract_dark(frame, dark_frame, data_exposure = 1, dark_exposure = 4)
3×3 Array{Float64,2}:
 0.75  0.75  0.75
 0.75  0.75  0.75
 0.75  0.75  0.75
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_dark!-Tuple{AbstractArray,AbstractArray}"><code>subtract_dark!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L370-L399">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T,N} where N,Any}} where T" href="#CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T,N} where N,Any}} where T"><code>CCDReduction.subtract_overscan!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">subtract_overscan!(frame, idxs; dims = axes_min_length(idxs))</code></pre><p>In-place version of <a href="#CCDReduction.subtract_overscan-Tuple{Any,Any}"><code>subtract_overscan</code></a></p><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_overscan-Tuple{Any,Any}"><code>subtract_overscan</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L60-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.subtract_overscan-Tuple{Any,Any}" href="#CCDReduction.subtract_overscan-Tuple{Any,Any}"><code>CCDReduction.subtract_overscan</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">subtract_overscan(frame, idxs; dims = axes_min_length(idxs), [hdu = 1])</code></pre><p>Subtract the overscan frame from image.</p><p><code>dims</code> is the dimension along which <code>overscan_frame</code> is combined. The default value of <code>dims</code> is the axis with smaller length in overscan region. If <code>idxs</code> is a string it will be parsed as FITS-style indices.</p><p>If <code>frame</code> is a string, it will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = [4.0 2.0 3.0 1.0 1.0];

julia&gt; subtract_overscan(frame, (:, 4:5), dims = 2)
1×5 Array{Float64,2}:
 3.0  1.0  2.0  0.0  0.0

julia&gt; subtract_overscan(frame, &quot;[4:5, 1:1]&quot;, dims = 2)
1×5 Array{Float64,2}:
 3.0  1.0  2.0  0.0  0.0
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.subtract_overscan!-Union{Tuple{T}, Tuple{AbstractArray{T,N} where N,Any}} where T"><code>subtract_overscan!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L78-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.trim-Tuple{Any,Any}" href="#CCDReduction.trim-Tuple{Any,Any}"><code>CCDReduction.trim</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">trim(frame, idxs; [hdu = 1])</code></pre><p>Trims the <code>frame</code> to remove the region specified by idxs.</p><p>This function trims the array in a manner such that final array should be rectangular. The indices follow standard Julia convention, so <code>(:, 45:60)</code> trims all columns from 45 to 60 and <code>(1:20, :)</code> trims all the rows from 1 to 20. The function also supports FITS-style indices.</p><p>If <code>frame</code> is a string, it will be loaded into <a href="#CCDReduction.CCDData"><code>CCDData</code></a> first. The HDU loaded can be specified by <code>hdu</code> which by default is 1.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; frame = ones(5, 5);

julia&gt; trim(frame, (:, 2:5))
5×1 Array{Float64,2}:
 1.0
 1.0
 1.0
 1.0
 1.0

julia&gt; trim(frame, &quot;[2:5, 1:5]&quot;)
5×1 Array{Float64,2}:
 1.0
 1.0
 1.0
 1.0
 1.0
</code></pre><p><strong>See Also</strong></p><p><a href="#CCDReduction.trimview-Tuple{AbstractArray,Any}"><code>trimview</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L165-L200">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.trimview-Tuple{AbstractArray,Any}" href="#CCDReduction.trimview-Tuple{AbstractArray,Any}"><code>CCDReduction.trimview</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">trimview(frame, idxs)</code></pre><p>Trims the <code>frame</code> to remove the region specified by idxs.</p><p>This function is same as the <a href="#CCDReduction.trim-Tuple{Any,Any}"><code>trim</code></a> function but returns a view of the frame.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function returns a view of the frame, so any modification to output array will result in modification of frame.</p></div></div><p><strong>See Also</strong></p><p><a href="#CCDReduction.trim-Tuple{Any,Any}"><code>trim</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/methods.jl#L204-L217">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.AbstractCCDData" href="#CCDReduction.AbstractCCDData"><code>CCDReduction.AbstractCCDData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">AbstractCCDData{T}</code></pre><p>Supertype for <code>CCDData</code> based on <code>AbstractMatrix</code> interface.</p><p>Every subtype of this type should have methods <code>data</code> and <code>hdr</code> defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/ccddata.jl#L2-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.find_ccd-Tuple{Base.Broadcast.Broadcasted}" href="#CCDReduction.find_ccd-Tuple{Base.Broadcast.Broadcasted}"><code>CCDReduction.find_ccd</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>A = find_ccd(As)</code> returns the first CCDData among the arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/ccddata.jl#L96">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.getdata-Tuple{FITSIO.ImageHDU}" href="#CCDReduction.getdata-Tuple{FITSIO.ImageHDU}"><code>CCDReduction.getdata</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">CCDReduction.getdata(::FITSIO.ImageHDU)</code></pre><p>Loads the given HDU as an <code>Array</code>, permuting the dimensions appropriately.</p><p>FITSIO.jl takes over memory read in by cfitsio, which reads in row-major form, whereas when Julia takes that memory, it is assumed as column major. Therefore all data read by <a href="http://juliaastro.github.io/FITSIO.jl/latest/api.html#Base.read-Tuple{ImageHDU}"><code>FITSIO.read</code></a> is transposed. This function allows the user to read data in a consistent way to <code>Array</code> by transposing after reading.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/fits.jl#L3-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CCDReduction.writefits-Tuple{Any,Any}" href="#CCDReduction.writefits-Tuple{Any,Any}"><code>CCDReduction.writefits</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">CCDReduction.writefits(file_path, data; header = nothing)
CCDReduction.writefits(file_path, ccd::CCDData)</code></pre><p>Writes <code>data</code>/<code>ccd</code> in FITS format at <code>file_path</code>.</p><p><code>FITSIO</code> takes over memory write in by <code>cfitsio</code>, which writes in row-major form, whereas when Julia gives that memory, it is assumed as column major. Therefore all data written by <a href="http://juliaastro.github.io/FITSIO.jl/latest/api.html#Base.write-Tuple{FITS,Dict{String,V}%20where%20V}"><code>FITSIO.write</code></a> is transposed. This function allows the user to write the data in a consistent way to FITS file by transposing before writing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAstro/CCDReduction.jl/blob/708320a3001f8ad4556f68d7accdd3310780903e/src/collection.jl#L44-L52">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 5 January 2021 20:36">Tuesday 5 January 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
